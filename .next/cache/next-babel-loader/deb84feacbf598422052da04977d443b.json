{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/ahroidlife/Documents/nextjs/blog/components/molecules/forms/textIcon/texticon.jsx\";\n\nvar __jsx = React.createElement;\nimport React, { useEffect, useRef } from 'react';\nimport { Container, View, Input, Icon, Text } from '../../../atoms';\nimport './styles.scss';\nimport Link from 'next/link';\n\nvar client = require('contentful').createClient({\n  space: process.env.SPACE_ID,\n  accessToken: process.env.ACCESS_TOKEN\n});\n\nvar TextIcon = function TextIcon(_ref) {\n  var placeholder = _ref.placeholder,\n      left = _ref.left,\n      props = _ref.props;\n\n  var _React$useState = React.useState(\"\"),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      searchTerm = _React$useState2[0],\n      setSearchTerm = _React$useState2[1];\n\n  var _React$useState3 = React.useState([]),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      searchResults = _React$useState4[0],\n      setSearchResults = _React$useState4[1];\n\n  var refInput = useRef(); // isActiveInput\n\n  var handleChange = function handleChange(event) {\n    setSearchTerm(event.target.value);\n  };\n\n  function searching(title) {\n    var entries;\n    return _regeneratorRuntime.async(function searching$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(client.getEntries({\n              content_type: 'story',\n              'fields.title[match]': title\n            }));\n\n          case 2:\n            entries = _context.sent;\n\n            if (!entries.items) {\n              _context.next = 5;\n              break;\n            }\n\n            return _context.abrupt(\"return\", entries.items);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  useEffect(function () {\n    function getResults() {\n      var results;\n      return _regeneratorRuntime.async(function getResults$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(searching(searchTerm));\n\n            case 2:\n              results = _context2.sent;\n              setSearchResults(_toConsumableArray(results));\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    var current = refInput.current;\n    console.log(current);\n\n    if (searchTerm.length > 1) {\n      getResults();\n    } else {\n      setSearchResults([]);\n    }\n  }, [searchTerm]);\n  return __jsx(Container, {\n    className: \"header-input-search\",\n    position: \"relative\",\n    style: {\n      left: left\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, __jsx(Icon, {\n    name: \"search\",\n    position: \"absolute\",\n    left: \"15px\",\n    top: \"9px\",\n    width: \"1.3em\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }), __jsx(Input, {\n    className: \"inputTextIcon\",\n    placeholder: placeholder,\n    width: \"300px\",\n    padding: \"5px 30px 5px 45px\",\n    value: searchTerm,\n    ref: refInput,\n    onChange: handleChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }), __jsx(View, {\n    className: \"search-results\",\n    direction: \"column\",\n    isEqualFlex: \"none\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, __jsx(View, {\n    height: \"30px\",\n    justify: \"space-between\",\n    align: \"center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, __jsx(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 21\n    }\n  }, __jsx(Text, {\n    weight: \"medium\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 25\n    }\n  }, \"Results of \", __jsx(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 58\n    }\n  }, searchTerm))), __jsx(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  }, __jsx(View, {\n    className: \"rounded-counter\",\n    justify: \"center\",\n    align: \"center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 25\n    }\n  }, __jsx(Text, {\n    variant: \"secondary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 29\n    }\n  }, searchResults.length)))), __jsx(View, {\n    flexValue: \"1\",\n    className: \"content\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, __jsx(\"ul\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }, searchResults.map(function (item, index) {\n    return __jsx(Link, {\n      key: index,\n      href: \"/stories/[slug]\",\n      as: \"/stories/\".concat(item.fields.slug),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 29\n      }\n    }, __jsx(\"a\", {\n      style: {\n        textDecoration: 'none'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 33\n      }\n    }, __jsx(\"li\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 37\n      }\n    }, item.fields.title)));\n  })))));\n};\n\nexport default TextIcon;","map":{"version":3,"sources":["/Users/ahroidlife/Documents/nextjs/blog/components/molecules/forms/textIcon/texticon.jsx"],"names":["React","useEffect","useRef","Container","View","Input","Icon","Text","Link","client","require","createClient","space","process","env","SPACE_ID","accessToken","ACCESS_TOKEN","TextIcon","placeholder","left","props","useState","searchTerm","setSearchTerm","searchResults","setSearchResults","refInput","handleChange","event","target","value","searching","title","getEntries","content_type","entries","items","getResults","results","current","console","log","length","map","item","index","fields","slug","textDecoration"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef } from 'react'\nimport {Container, View, Input, Icon, Text} from '../../../atoms'\nimport './styles.scss'\nimport Link from 'next/link';\n\nconst client = require('contentful').createClient({\n    space: process.env.SPACE_ID,\n    accessToken: process.env.ACCESS_TOKEN\n})\n\nconst TextIcon = ({placeholder, left, props}) => {\n\n        const [searchTerm, setSearchTerm] = React.useState(\"\");\n        const [searchResults, setSearchResults] = React.useState([]);\n        const refInput = useRef()\n\n        // isActiveInput\n        const handleChange = event => {\n            setSearchTerm(event.target.value);\n        };\n\n        async function searching(title){\n            const entries = await client.getEntries({\n                content_type: 'story',\n                'fields.title[match]': title\n              })\n            if (entries.items) return entries.items\n        }\n\n        useEffect(() => {\n            async function getResults(){\n                const results = await searching(searchTerm)\n                setSearchResults([...results])\n            }\n            const { current } = refInput;\n\n            console.log(current)\n            \n            if(searchTerm.length > 1){\n                getResults()\n            }else{\n                setSearchResults([])\n            }\n\n        }, [searchTerm]);\n\n    return (\n        <Container className=\"header-input-search\" position=\"relative\" style={{\n            left: left\n        }}>\n            <Icon name=\"search\" position=\"absolute\" left=\"15px\" top=\"9px\" width=\"1.3em\"/>\n            <Input \n            className=\"inputTextIcon\"\n            placeholder={placeholder} \n            width=\"300px\" \n            padding=\"5px 30px 5px 45px\"\n            value={searchTerm}\n            ref={refInput}\n            onChange={handleChange}/>\n\n            <View className=\"search-results\"  direction=\"column\" isEqualFlex=\"none\">\n                <View height=\"30px\" justify=\"space-between\" align=\"center\">\n                    <View>\n                        <Text weight=\"medium\">Results of <strong>{searchTerm}</strong></Text>\n                    </View>\n                    <View>\n                        <View className=\"rounded-counter\" justify=\"center\" align=\"center\">\n                            <Text variant=\"secondary\">{searchResults.length}</Text>\n                        </View>\n                    </View>\n                </View>\n                <View flexValue=\"1\" className=\"content\">\n                    <ul>\n                        {searchResults.map((item, index) => (\n                            <Link key={index} href=\"/stories/[slug]\" as={`/stories/${item.fields.slug}`}>\n                                <a  style={{textDecoration: 'none'}}>\n                                    <li >{item.fields.title}</li>\n                                </a>\n                            </Link>\n                        ))}\n                    </ul>\n                </View>\n            </View>\n        </Container>\n    )\n}\n\nexport default TextIcon"]},"metadata":{},"sourceType":"module"}