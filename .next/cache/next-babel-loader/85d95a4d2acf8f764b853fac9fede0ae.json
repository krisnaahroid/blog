{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar __jsx = React.createElement;\nimport React, { Component, useEffect, useState } from 'react';\nimport ContentLoader from 'react-content-loader';\nimport { BlogLayout } from \"../../components/templates/layouts\";\nimport { Hero } from '../../components/organisms';\nimport ImageHero from '../../assets/illustrations/daily-stories.svg';\nimport { SliderHero, SliderCategories } from '../../components/organisms';\nimport Router from 'next/router';\nimport { Container, View, Text, Rows } from '../../components/atoms';\nimport { CardStories } from '../../components/molecules';\nimport './stories.scss';\nimport Head from 'next/head';\nimport Knobs from './stories.knobs.json';\nimport { useDispatch } from 'react-redux';\nvar item = Knobs.item,\n    populars = Knobs.populars;\nimport { NextSeo } from 'next-seo';\nimport actions from '../../store/modules/stories/actions';\nimport Link from 'next/link';\n\nvar client = require('contentful').createClient({\n  space: process.env.SPACE_ID,\n  accessToken: process.env.ACCESS_TOKEN\n});\n\nvar Stories = function Stories() {\n  var _useState = useState([]),\n      popular = _useState[0],\n      setPopular = _useState[1];\n\n  var _useState2 = useState([]),\n      stories = _useState2[0],\n      setStories = _useState2[1];\n\n  var _useState3 = useState([]),\n      story = _useState3[0],\n      setStory = _useState3[1];\n\n  var _useState4 = useState(false),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(false),\n      loading2 = _useState5[0],\n      setLoading2 = _useState5[1];\n\n  var dispatch = useDispatch();\n\n  function fetchPopulars() {\n    var entries;\n    return _regeneratorRuntime.async(function fetchPopulars$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(client.getEntries({\n              content_type: 'popularStories'\n            }));\n\n          case 2:\n            entries = _context.sent;\n\n            if (!entries.items) {\n              _context.next = 5;\n              break;\n            }\n\n            return _context.abrupt(\"return\", entries.items);\n\n          case 5:\n            console.log(\"Error getting Entries for \".concat(contentType.name, \".\"));\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function fetchStoryCategories() {\n    var entries;\n    return _regeneratorRuntime.async(function fetchStoryCategories$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(client.getEntries({\n              content_type: 'stories'\n            }));\n\n          case 2:\n            entries = _context2.sent;\n\n            if (!entries.items) {\n              _context2.next = 5;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", entries.items);\n\n          case 5:\n            console.log(\"Error getting Entries for \".concat(contentType.name, \".\"));\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function fetchStories() {\n    var entries;\n    return _regeneratorRuntime.async(function fetchStories$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(client.getEntries({\n              content_type: 'story'\n            }));\n\n          case 2:\n            entries = _context3.sent;\n\n            if (!entries.items) {\n              _context3.next = 5;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", entries.items);\n\n          case 5:\n            console.log(\"Error getting Entries for \".concat(contentType.name, \".\"));\n\n          case 6:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  useEffect(function () {\n    document.body.style.overflow = 'unset';\n\n    function getPopulars() {\n      var allPosts;\n      return _regeneratorRuntime.async(function getPopulars$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return _regeneratorRuntime.awrap(fetchPopulars());\n\n            case 2:\n              allPosts = _context4.sent;\n              setPopular(_toConsumableArray(allPosts));\n\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    function getStoriesCategories() {\n      var allCategories;\n      return _regeneratorRuntime.async(function getStoriesCategories$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return _regeneratorRuntime.awrap(fetchStoryCategories());\n\n            case 2:\n              allCategories = _context5.sent;\n              setStories(_toConsumableArray(allCategories));\n              setLoading2(true);\n\n            case 5:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    function getStories() {\n      var allStories;\n      return _regeneratorRuntime.async(function getStories$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return _regeneratorRuntime.awrap(fetchStories());\n\n            case 2:\n              allStories = _context6.sent;\n              setStory(_toConsumableArray(allStories));\n              setLoading(true);\n\n            case 5:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    getStories();\n    getStoriesCategories();\n    getPopulars();\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(NextSeo, {\n    title: \"Krisna Ahroid | Stories\",\n    description: \"Krisna Ahroid. Stories is my story at day by day. I Write and Talk!\",\n    openGraph: {\n      type: 'website',\n      locale: 'en_IE',\n      url: 'https://www.ahroidlife.co/stories',\n      site_name: 'ahroidlife',\n      title: 'Krisna Ahroid | Stories',\n      description: 'Krisna Ahroid. An Interaction Designer & Frontend Developer based in Jakarta, Indonesia',\n      image: 'https://res.cloudinary.com/ahroidlife/image/upload/v1588948107/daily-stories_xssful.svg'\n    }\n  }), __jsx(BlogLayout, {\n    title: \"Stories\"\n  }, __jsx(Hero, {\n    title: \"Stories Resources\",\n    subtitle: \"The more that you read the more things you will know. \",\n    img: ImageHero\n  }), __jsx(SliderHero, {\n    items: popular\n  }), loading2 ? __jsx(SliderCategories, {\n    items: stories\n  }) : __jsx(View, {\n    className: \"stories-loader\"\n  }, __jsx(ContentLoader, {\n    width: 730,\n    height: 304,\n    speed: 1,\n    primaryColor: \"#e4e4e4\",\n    secondaryColor: \"#d3d3d3\"\n  }, __jsx(\"rect\", {\n    x: \"0\",\n    y: \"49\",\n    rx: \"0\",\n    ry: \"0\",\n    width: \"100\",\n    height: \"20\"\n  }), __jsx(\"rect\", {\n    x: \"0\",\n    y: \"97\",\n    rx: \"0\",\n    ry: \"0\",\n    width: \"100%\",\n    height: \"100\"\n  }))), __jsx(View, {\n    padding: \"100px\",\n    direction: \"column\",\n    className: \"stories-post-container\"\n  }, __jsx(View, {\n    margin: \"0 0 50px 0\"\n  }, __jsx(Text, {\n    family: \"daily\",\n    size: \"32\"\n  }, \"Our Stories\")), __jsx(Rows, null, loading ? story.map(function (item, index) {\n    return __jsx(View, {\n      key: index,\n      className: \"grid-item-3\"\n    }, __jsx(Link, {\n      href: \"/stories/[slug]\",\n      as: \"/stories/\".concat(item.fields.slug)\n    }, __jsx(\"a\", {\n      style: {\n        textDecoration: 'none'\n      }\n    }, __jsx(CardStories, {\n      title: item.fields.title,\n      label: item.fields.label,\n      image: item.fields.image.fields.file.url,\n      className: \"card-our-stories\"\n    }))));\n  }) : __jsx(ContentLoader, {\n    viewBox: \"0 0 500 280\",\n    height: 280,\n    speed: 3\n  }, __jsx(\"rect\", {\n    x: \"3\",\n    y: \"3\",\n    rx: \"10\",\n    ry: \"10\",\n    width: \"100%\",\n    height: \"180\"\n  }), __jsx(\"rect\", {\n    x: \"6\",\n    y: \"190\",\n    rx: \"0\",\n    ry: \"0\",\n    width: \"292\",\n    height: \"20\"\n  }), __jsx(\"rect\", {\n    x: \"4\",\n    y: \"215\",\n    rx: \"0\",\n    ry: \"0\",\n    width: \"239\",\n    height: \"20\"\n  }), __jsx(\"rect\", {\n    x: \"4\",\n    y: \"242\",\n    rx: \"0\",\n    ry: \"0\",\n    width: \"274\",\n    height: \"20\"\n  }))))));\n};\n\nexport default Stories;","map":null,"metadata":{},"sourceType":"module"}