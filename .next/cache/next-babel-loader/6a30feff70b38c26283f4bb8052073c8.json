{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { Component, useEffect, useState } from 'react';\nimport ContentLoader from 'react-content-loader';\nimport { BlogLayout } from \"../../components/templates/layouts\";\nimport { Hero } from '../../components/organisms';\nimport ImageHero from '../../assets/illustrations/daily-stories.svg';\nimport { SliderHero, SliderCategories } from '../../components/organisms';\nimport Router from 'next/router';\nimport { Container, View, Text, Rows } from '../../components/atoms';\nimport { CardStories } from '../../components/molecules';\nimport './stories.scss';\nimport Head from 'next/head';\nimport Knobs from './stories.knobs.json';\nimport { useDispatch } from 'react-redux';\nconst {\n  item,\n  populars\n} = Knobs;\nimport { NextSeo } from 'next-seo';\nimport actions from '../../store/modules/stories/actions';\nimport Link from 'next/link';\n\nconst client = require('contentful').createClient({\n  space: process.env.SPACE_ID,\n  accessToken: process.env.ACCESS_TOKEN\n});\n\nconst Stories = () => {\n  const {\n    0: popular,\n    1: setPopular\n  } = useState([]);\n  const {\n    0: stories,\n    1: setStories\n  } = useState([]);\n  const {\n    0: story,\n    1: setStory\n  } = useState([]);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: loading2,\n    1: setLoading2\n  } = useState(false);\n  const dispatch = useDispatch();\n\n  async function fetchPopulars() {\n    const entries = await client.getEntries({\n      content_type: 'popularStories'\n    });\n    if (entries.items) return entries.items;\n    console.log(`Error getting Entries for ${contentType.name}.`);\n  }\n\n  async function fetchStoryCategories() {\n    const entries = await client.getEntries({\n      content_type: 'stories'\n    });\n    if (entries.items) return entries.items;\n    console.log(`Error getting Entries for ${contentType.name}.`);\n  }\n\n  async function fetchStories() {\n    const entries = await client.getEntries({\n      content_type: 'story'\n    });\n    if (entries.items) return entries.items;\n    console.log(`Error getting Entries for ${contentType.name}.`);\n  }\n\n  useEffect(() => {\n    document.body.style.overflow = 'unset';\n\n    async function getPopulars() {\n      const allPosts = await fetchPopulars();\n      setPopular([...allPosts]);\n    }\n\n    async function getStoriesCategories() {\n      const allCategories = await fetchStoryCategories();\n      setStories([...allCategories]);\n      setLoading2(true);\n    }\n\n    async function getStories() {\n      const allStories = await fetchStories();\n      setStory([...allStories]);\n      setLoading(true);\n    }\n\n    getStories();\n    getStoriesCategories();\n    getPopulars();\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(NextSeo, {\n    title: \"Krisna Ahroid | Stories\",\n    description: \"Krisna Ahroid. Stories is my story at day by day. I Write and Talk!\",\n    openGraph: {\n      type: 'website',\n      locale: 'en_IE',\n      url: 'https://www.ahroidlife.co/stories',\n      site_name: 'ahroidlife',\n      title: 'Krisna Ahroid | Stories',\n      description: 'Krisna Ahroid. An Interaction Designer & Frontend Developer based in Jakarta, Indonesia',\n      image: 'https://res.cloudinary.com/ahroidlife/image/upload/v1588948107/daily-stories_xssful.svg'\n    }\n  }), __jsx(BlogLayout, {\n    title: \"Stories\"\n  }, __jsx(Hero, {\n    title: \"Stories Resources\",\n    subtitle: \"The more that you read the more things you will know. \",\n    img: ImageHero\n  }), __jsx(SliderHero, {\n    items: popular\n  }), loading2 ? __jsx(SliderCategories, {\n    items: stories\n  }) : __jsx(View, {\n    className: \"stories-loader\"\n  }, __jsx(ContentLoader, {\n    width: 730,\n    height: 304,\n    speed: 1,\n    primaryColor: \"#e4e4e4\",\n    secondaryColor: \"#d3d3d3\"\n  }, __jsx(\"rect\", {\n    x: \"0\",\n    y: \"49\",\n    rx: \"0\",\n    ry: \"0\",\n    width: \"100\",\n    height: \"20\"\n  }), __jsx(\"rect\", {\n    x: \"0\",\n    y: \"97\",\n    rx: \"0\",\n    ry: \"0\",\n    width: \"100%\",\n    height: \"100\"\n  }))), __jsx(View, {\n    padding: \"100px\",\n    direction: \"column\",\n    className: \"stories-post-container\"\n  }, __jsx(View, {\n    margin: \"0 0 50px 0\"\n  }, __jsx(Text, {\n    family: \"daily\",\n    size: \"32\"\n  }, \"Our Stories\")), __jsx(Rows, null, loading ? story.map((item, index) => __jsx(View, {\n    key: index,\n    className: \"grid-item-3\"\n  }, __jsx(Link, {\n    href: \"/stories/[slug]\",\n    as: `/stories/${item.fields.slug}`\n  }, __jsx(\"a\", {\n    style: {\n      textDecoration: 'none'\n    }\n  }, __jsx(CardStories, {\n    title: item.fields.title,\n    label: item.fields.label,\n    image: item.fields.image.fields.file.url,\n    className: \"card-our-stories\"\n  }))))) : __jsx(ContentLoader, {\n    viewBox: \"0 0 500 280\",\n    height: 280,\n    speed: 3\n  }, __jsx(\"rect\", {\n    x: \"3\",\n    y: \"3\",\n    rx: \"10\",\n    ry: \"10\",\n    width: \"100%\",\n    height: \"180\"\n  }), __jsx(\"rect\", {\n    x: \"6\",\n    y: \"190\",\n    rx: \"0\",\n    ry: \"0\",\n    width: \"292\",\n    height: \"20\"\n  }), __jsx(\"rect\", {\n    x: \"4\",\n    y: \"215\",\n    rx: \"0\",\n    ry: \"0\",\n    width: \"239\",\n    height: \"20\"\n  }), __jsx(\"rect\", {\n    x: \"4\",\n    y: \"242\",\n    rx: \"0\",\n    ry: \"0\",\n    width: \"274\",\n    height: \"20\"\n  }))))));\n};\n\nexport default Stories;","map":null,"metadata":{},"sourceType":"module"}