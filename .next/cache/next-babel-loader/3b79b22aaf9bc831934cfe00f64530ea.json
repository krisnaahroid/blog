{"ast":null,"code":"var _jsxFileName = \"/Users/ahroidlife/Documents/nextjs/blog/components/molecules/forms/textIcon/texticon.jsx\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useRef } from 'react';\nimport { Container, View, Input, Icon, Text } from '../../../atoms';\nimport './styles.scss';\nimport Link from 'next/link';\n\nconst client = require('contentful').createClient({\n  space: process.env.SPACE_ID,\n  accessToken: process.env.ACCESS_TOKEN\n});\n\nconst TextIcon = ({\n  placeholder,\n  left,\n  props\n}) => {\n  const [searchTerm, setSearchTerm] = React.useState(\"\");\n  const [searchResults, setSearchResults] = React.useState([]);\n  const refInput = useRef(); // isActiveInput\n\n  const handleChange = event => {\n    setSearchTerm(event.target.value);\n  };\n\n  async function searching(title) {\n    const entries = await client.getEntries({\n      content_type: 'story',\n      'fields.title[match]': title\n    });\n    if (entries.items) return entries.items;\n  }\n\n  useEffect(() => {\n    async function getResults() {\n      const results = await searching(searchTerm);\n      setSearchResults([...results]);\n    }\n\n    const {\n      current\n    } = refInput;\n    console.log(current);\n\n    if (searchTerm.length > 1) {\n      getResults();\n    } else {\n      setSearchResults([]);\n    }\n  }, [searchTerm]);\n  return __jsx(Container, {\n    className: \"header-input-search\",\n    position: \"relative\",\n    style: {\n      left: left\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, __jsx(Icon, {\n    name: \"search\",\n    position: \"absolute\",\n    left: \"15px\",\n    top: \"9px\",\n    width: \"1.3em\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }), __jsx(Input, {\n    className: \"inputTextIcon\",\n    placeholder: placeholder,\n    width: \"300px\",\n    padding: \"5px 30px 5px 45px\",\n    value: searchTerm,\n    innerRef: refInput,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }), __jsx(View, {\n    className: \"search-results\",\n    direction: \"column\",\n    isEqualFlex: \"none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, __jsx(View, {\n    height: \"30px\",\n    justify: \"space-between\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, __jsx(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 21\n    }\n  }, __jsx(Text, {\n    weight: \"medium\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 25\n    }\n  }, \"Results of \", __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 58\n    }\n  }, searchTerm))), __jsx(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  }, __jsx(View, {\n    className: \"rounded-counter\",\n    justify: \"center\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 25\n    }\n  }, __jsx(Text, {\n    variant: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 29\n    }\n  }, searchResults.length)))), __jsx(View, {\n    flexValue: \"1\",\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, __jsx(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }, searchResults.map((item, index) => __jsx(Link, {\n    key: index,\n    href: \"/stories/[slug]\",\n    as: `/stories/${item.fields.slug}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 29\n    }\n  }, __jsx(\"a\", {\n    style: {\n      textDecoration: 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 33\n    }\n  }, __jsx(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 37\n    }\n  }, item.fields.title))))))));\n};\n\nexport default TextIcon;","map":{"version":3,"sources":["/Users/ahroidlife/Documents/nextjs/blog/components/molecules/forms/textIcon/texticon.jsx"],"names":["React","useEffect","useRef","Container","View","Input","Icon","Text","Link","client","require","createClient","space","process","env","SPACE_ID","accessToken","ACCESS_TOKEN","TextIcon","placeholder","left","props","searchTerm","setSearchTerm","useState","searchResults","setSearchResults","refInput","handleChange","event","target","value","searching","title","entries","getEntries","content_type","items","getResults","results","current","console","log","length","map","item","index","fields","slug","textDecoration"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef } from 'react'\nimport {Container, View, Input, Icon, Text} from '../../../atoms'\nimport './styles.scss'\nimport Link from 'next/link';\n\nconst client = require('contentful').createClient({\n    space: process.env.SPACE_ID,\n    accessToken: process.env.ACCESS_TOKEN\n})\n\nconst TextIcon = ({placeholder, left, props}) => {\n\n        const [searchTerm, setSearchTerm] = React.useState(\"\");\n        const [searchResults, setSearchResults] = React.useState([]);\n        const refInput = useRef()\n\n        // isActiveInput\n        const handleChange = event => {\n            setSearchTerm(event.target.value);\n        };\n\n        async function searching(title){\n            const entries = await client.getEntries({\n                content_type: 'story',\n                'fields.title[match]': title\n              })\n            if (entries.items) return entries.items\n        }\n\n        useEffect(() => {\n            async function getResults(){\n                const results = await searching(searchTerm)\n                setSearchResults([...results])\n            }\n            const { current } = refInput;\n\n            console.log(current)\n            \n            if(searchTerm.length > 1){\n                getResults()\n            }else{\n                setSearchResults([])\n            }\n\n        }, [searchTerm]);\n\n    return (\n        <Container className=\"header-input-search\" position=\"relative\" style={{\n            left: left\n        }}>\n            <Icon name=\"search\" position=\"absolute\" left=\"15px\" top=\"9px\" width=\"1.3em\"/>\n            <Input \n            className=\"inputTextIcon\"\n            placeholder={placeholder} \n            width=\"300px\" \n            padding=\"5px 30px 5px 45px\"\n            value={searchTerm}\n            innerRef={refInput}\n            onChange={handleChange}/>\n\n            <View className=\"search-results\"  direction=\"column\" isEqualFlex=\"none\">\n                <View height=\"30px\" justify=\"space-between\" align=\"center\">\n                    <View>\n                        <Text weight=\"medium\">Results of <strong>{searchTerm}</strong></Text>\n                    </View>\n                    <View>\n                        <View className=\"rounded-counter\" justify=\"center\" align=\"center\">\n                            <Text variant=\"secondary\">{searchResults.length}</Text>\n                        </View>\n                    </View>\n                </View>\n                <View flexValue=\"1\" className=\"content\">\n                    <ul>\n                        {searchResults.map((item, index) => (\n                            <Link key={index} href=\"/stories/[slug]\" as={`/stories/${item.fields.slug}`}>\n                                <a  style={{textDecoration: 'none'}}>\n                                    <li >{item.fields.title}</li>\n                                </a>\n                            </Link>\n                        ))}\n                    </ul>\n                </View>\n            </View>\n        </Container>\n    )\n}\n\nexport default TextIcon"]},"metadata":{},"sourceType":"module"}